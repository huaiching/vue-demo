# 生命週期函數

每個 `vue 元件` 從 `創建` 到 `取消掛載`，會經歷 各個階段，這些階段 都有對應的 `生命週期函數` 可以讓 開發人員 進行 `需要的邏輯處理`，

![alt text](image/lifeCycle_01.png)

例如：
- `初始渲染完成` 階段為 `mounted`，此時有對應的生命週期函數 `onMounted` 可以使用。
  - 使用場景：
    - 發送 API 取得初始化資料
- `頁面渲染完成` 階段為 `updated`，此時有對應的生命週期函數 `onUpdated` 可以使用。
  - 使用場景：
    - 資料同步作業

## 語法

以 `初始渲染完成` 和 `頁面渲染完成` 為例，其餘可參考圖片說明。

```ts
<script setup lang="ts">
onMounted(()=>{
    初始渲染完成後，要進行的邏輯處理
})
onUpdated(()=>{
    頁面渲染完成後，要進行的邏輯處理
})
</script>
```

## 範例

```html
<script setup lang="ts">
import { ref, onMounted, onUpdated } from 'vue'

const message = ref('初始內容')
const status = ref('尚未掛載')

// 標記是否第一次掛載
let mounted = false
// 初始渲染完成
onMounted(() => {
  status.value = '元件已掛載完成'
})
// 頁面渲染完成
onUpdated(() => {
  // 只在已掛載後，且 message 改變時更新狀態
  if (mounted) {
    status.value = '畫面已更新'
  }
  mounted = true
})
</script>

<template>
  <h1>生命週期函數</h1>
  <div>
    <p>message：{{ message }}</p>
    <p>status：{{ status }}</p>
    <button @click="message = '內容已變更'">更新內容</button>
  </div>
</template>
```